<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Broadcast Programs Manager</title>
  <style>
    body {
      font-family: Arial, sans-serif;
      margin: 0;
      padding: 0;
      background: var(--bg);
      color: var(--text);
      transition: 0.3s;
    }

    :root {
      --bg: #ffffff;
      --text: #000000;
      --card: #f2f2f2;
      --input-bg: #ffffff;
    }

    .dark {
      --bg: #121212;
      --text: #eaeaea;
      --card: #1f1f1f;
      --input-bg: #2a2a2a;
    }

    header {
      padding: 20px;
      background: royalblue;
      color: white;
      text-align: center;
      font-size: 24px;
      font-weight: bold;
      position: relative;
    }

    .dark-toggle {
      position: absolute;
      right: 15px;
      top: 15px;
      background: black;
      color: white;
      padding: 8px 12px;
      border-radius: 5px;
      border: none;
      cursor: pointer;
    }

    .container {
      max-width: 900px;
      margin: auto;
      padding: 20px;
    }

    input, select, textarea {
      width: 100%;
      padding: 10px;
      margin: 8px 0;
      border: 1px solid #ccc;
      border-radius: 5px;
      background: var(--input-bg);
      color: var(--text);
    }

    button {
      padding: 10px 15px;
      border: none;
      border-radius: 5px;
      cursor: pointer;
      margin-top: 10px;
    }
    

    .add-btn { background: royalblue; color: white; }
    .edit-btn { background: goldenrod; color: white; }
    .delete-btn { background: crimson; color: white; }

    .program-card {
      background: var(--card);
      padding: 15px;
      margin: 10px 0;
      border-radius: 8px;
    }

    .row {
      display: flex;
      gap: 10px;
    }
    .row > div { flex: 1; }
  </style>
</head>
<body>
  <header>
    Broadcast Programs Manager
    <button class="dark-toggle" onclick="toggleDarkMode()">ðŸŒ™</button>
  </header>

  <div class="container">
    <h2>Add / Edit Program</h2>
    <form id="programForm">
      <input type="hidden" id="programId" />

      <label>Program Name:</label>
      <input id="programName" required />

      <label>Description:</label>
      <textarea id="programDescription" required></textarea>

      <div class="row">
        <div>
          <label>Duration (minutes):</label>
          <input id="programDuration" type="number" min="1" max="300" required />
        </div>
        <div>
          <label>Time Slot:</label>
          <input id="programTime" type="time" required />
        </div>
      </div>

      <label>Channel:</label>
      <input id="programChannel" required />

      <label>Category:</label>
      <select id="programCategory" required>
        <option value="News">News</option>
        <option value="Sports">Sports</option>
        <option value="Music">Music</option>
        <option value="Education">Education</option>
        <option value="Talk Show">Talk Show</option>
      </select>

      <button id="submitBtn" class="add-btn">Add Program</button>
    </form>

    <h2>Search Programs</h2>
    <input id="searchInput" placeholder="Search by name..." oninput="displayPrograms()" />

    <h2>Programs List</h2>
    <div id="programList"></div>
  </div>

<script>
  let programs = JSON.parse(localStorage.getItem("programs")) || [];

  function save() {
    localStorage.setItem("programs", JSON.stringify(programs));
  }

  function toggleDarkMode() {
    document.body.classList.toggle("dark");
    localStorage.setItem("darkMode", document.body.classList.contains("dark"));
  }

  if (localStorage.getItem("darkMode") === "true") {
    document.body.classList.add("dark");
  }

  document.getElementById("programForm").addEventListener("submit", function (e) {
    e.preventDefault();

    const id = document.getElementById("programId").value;
    const name = document.getElementById("programName").value.trim();
    const desc = document.getElementById("programDescription").value.trim();
    const duration = Number(document.getElementById("programDuration").value);
    const time = document.getElementById("programTime").value;
    const channel = document.getElementById("programChannel").value.trim();
    const category = document.getElementById("programCategory").value;

    if (!name || !desc || !duration || !time || !channel) {
      alert("All fields are required.");
      return;
    }

    if (duration < 1 || duration > 300) {
      alert("Duration must be between 1 and 300 minutes.");
      return;
    }

    if (id) {
      const p = programs.find(p => p.id == id);
      p.name = name;
      p.description = desc;
      p.duration = duration;
      p.timeSlot = time;
      p.channel = channel;
      p.category = category;
      document.getElementById("submitBtn").textContent = "Add Program";
    } else {
      programs.push({ id: Date.now(), name, description: desc, duration, timeSlot: time, channel, category });
    }

    save();
    this.reset();
    document.getElementById("programId").value = "";
    displayPrograms();
  });

  function editProgram(id) {
    const p = programs.find(p => p.id === id);
    document.getElementById("programId").value = p.id;
    document.getElementById("programName").value = p.name;
    document.getElementById("programDescription").value = p.description;
    document.getElementById("programDuration").value = p.duration;
    document.getElementById("programTime").value = p.timeSlot;
    document.getElementById("programChannel").value = p.channel;
    document.getElementById("programCategory").value = p.category;
    document.getElementById("submitBtn").textContent = "Update Program";
  }

  function deleteProgram(id) {
    if (confirm("Delete this program?")) {
      programs = programs.filter(p => p.id !== id);
      save();
      displayPrograms();
    }
  }

  function displayPrograms() {
    const term = document.getElementById("searchInput").value.toLowerCase();
    const list = document.getElementById("programList");
    list.innerHTML = "";

    const filtered = programs.filter(p => p.name.toLowerCase().includes(term));

    if (filtered.length === 0) {
      list.innerHTML = "<p>No programs found.</p>";
      return;
    }

    filtered.forEach(p => {
      const card = document.createElement("div");
      card.className = "program-card";

      card.innerHTML = `
        <h3>${p.name}</h3>
        <p><strong>Description:</strong> ${p.description}</p>
        <p><strong>Duration:</strong> ${p.duration} minutes</
    }
  }